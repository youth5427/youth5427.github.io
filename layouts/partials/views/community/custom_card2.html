{{ $item := .item }} {{ $fill_image := .config.fill_image | default true }} {{
$resource := partial "functions/get_featured_image.html" $item }} {{ $anchor :=
$item.Params.image.focal_point | default "Center" }} {{ $link :=
$item.Params.external_link | default $item.RelPermalink }} {{ $target := "" }}
{{ if $item.Params.external_link }} {{ $link = $item.Params.external_link }} {{
$target = "target=\"_blank\" rel=\"noopener\"" }} {{ end }}

<div class="container mx-auto p-4">
  <div
    class="bg-gray-100 dark:bg-zinc-800 rounded-lg shadow-md p-4 group hover:bg-gray-200 dark:hover:bg-zinc-700 transition"
  >
    <!-- 이미지 섹션 -->
    <div class="relative overflow-hidden rounded-md mb-3">
      {{ $item := .item }} {{ $fill_image := .config.fill_image | default true
      }} {{ $resource := partial "functions/get_featured_image.html" $item }} {{
      $anchor := $item.Params.image.focal_point | default "Center" }} {{ with
      $resource }} {{ $image := "" }} {{if $fill_image}} {{ $image = .Fill
      (printf "960x540 %s" $anchor) }} {{else}} {{ $image = .Fit (printf
      "960x540 %s" $anchor) }} {{end}} {{ if ne $image.MediaType.SubType "gif"
      }}{{ $image = $image.Process "webp" }}{{ end }}
      <a href="{{ $link }}" class="block aspect-w-16 aspect-h-9">
        <img
          class="object-cover w-full h-48 rounded-md transition-transform duration-300 group-hover:scale-105"
          src="{{ $image.RelPermalink }}"
          alt="{{ $item.Title | plainify }}"
        />
      </a>
      {{end}}
    </div>

    <!-- 텍스트 및 메타 정보 섹션 -->
    <div class="text-gray-800 dark:text-gray-300">
      <div class="flex flex-wrap items-center text-xs space-x-2 mb-2">
        <!-- 태그 -->
        {{ range $index, $value := first 1 ($item.GetTerms "tags") }}
        <a
          href="{{.RelPermalink}}"
          class="inline-block text-primary-700 dark:text-primary-300 uppercase"
          >{{ .Page.LinkTitle }}</a
        >
        {{end}}
      </div>

      <!-- 제목 -->
      <h3 class="text-xl font-bold leading-snug dark:text-white">
        <a
          href="{{ $link }}"
          class="hover:text-primary-500 dark:hover:text-primary-400 transition"
          >{{ $item.Title }}</a
        >
      </h3>

      <!-- 요약 -->
      <p class="mt-2 text-sm text-gray-600 dark:text-gray-400 line-clamp-2">
        {{ ($item.Params.summary | default $item.Summary) | plainify |
        htmlUnescape | chomp }}
      </p>

      <!-- 작성자 정보 -->
      {{ if .Params.authors }}
      <div class="flex items-center mt-3">
        {{ range $index, $value := first 1 ($item.GetTerms "authors") }}
        <div class="flex items-center space-x-2">
          {{ $avatar := (.Resources.ByType "image").GetMatch "*avatar*" }} {{
          $authorImage := $avatar.Process "Fill 40x40 Center 95 webp" }}
          <img
            src="{{$authorImage.RelPermalink}}"
            alt="avatar"
            class="w-8 h-8 rounded-full object-cover"
          />
          <span class="text-sm font-medium">{{- .Page.LinkTitle -}}</span>
        </div>
        {{end}}
      </div>
      {{ end }}
    </div>
  </div>
</div>
